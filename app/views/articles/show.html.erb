<div class="gallery">
	<div class="gallery__image"></div>
	<div class="gallery__controls">
		<div class="next"></div>
		<div class="previous"></div>
	</div>
</div>
<div class="interface--row">

	<div class="note note--display">
		<% if @article.exclusive? %>
			<p class="exclusive--note">Exclusiva</p>
		<% end %>
		<h1 class="title"><%= @article.name %></h1>	
		<div class="article__info">
			<% if @article.author and @article.author.name != "Ninguno" %>
				<p class="author">Por <%= @article.author.name %></p>

			<% else %>
				<p class="author">Por <%= @article.user.full_name %></p>
			<% end %>
			<p class="date"><%= @article.created_at.strftime("%m:%M %p %A %e %B, %Y") %></p>
			<% if @article.articable_type == "Section" %>
				<%= link_to @article.section, section_path(Section.find_by_name(@article.section)), class: "section" %>
			<% end %>
		</div>
		<%= render "components/social-media-links", article: @article %>
		<% if @article.keyword %>
			<div class="keyword-container">#EsNoticia: <%= @article.keyword.keyword %></div>
		<% end %>
		<div class="hashtags-container">
			<%= render @article.hashtags %>
		</div>

		<p class="short-description"><%= @article.short_description %></p>
		<% if @article.video_url != "" %> 
			<div class="iframe">
				<iframe width="650" height="415" src="<%= @article.	video_url %>" frameborder="0" allowfullscreen></iframe>
			</div>
		<% else %>		
			<% if @article.image %>
				<%= image_tag @article.image, class: "main-image" %>
			<% end %>
		<% end %>

		<div id="quill-container" class="quill--article">	
		</div>

		<!-- NOTAS DEL PROGRAMADOR-->
			<!-- NO QUITAR ESTOS IFS PORQUE SON LOS QUE VEN SI HAY BANNER O NO -->

			<!-- CAMBIAR EL NAME POR EL PARAMETRO QUE QUIERAS MOSTRAR->
		<!-- -->
		

		<% if get_banner(@article.articable, @article.articable_type, "Grande" ) %>

			<%= render "components/big-banner", article: @article, banner: get_banner(@article.articable, @article.articable_type, "Grande" )  %>
		<% else %>
			<% if get_banner(@article.articable, "Global", "Grande" ) %>
				<%= render "components/big-banner", article: @article, banner: get_banner(@article.articable, "Global", "Grande" ) %>
			<% else %>
				<%= render "components/big-banner", article: @article, banner: "" %>

			<% end %>
		<% end %>
		<%= render "components/section-recommendations", articles: get_latest_articles_per_section(Section.find_by_name(@article.section).id, 3), section_name: @article.section, highlight: "" %>

	</div>

	<% if get_banner(@article.articable, @article.articable_type, "Mediano" ) %>
		<%= render "components/sidebar", article: @article, banner: get_banner(@article.articable, @article.articable_type, "Mediano" ) %>
	<% else %>
		<% if get_banner(@article.articable, "Global", "Mediano" ) %>
			<%= render "components/sidebar", article: @article, banner: get_banner(@article.articable, "Global", "Mediano" ) %>
		<% else %>
			<%= render "components/sidebar", article: @article, banner: ""  %>
		<% end %>
	<% end %>

</div>


<template id="related-articles">
	<p class="related-articles"><strong class="related-articles__title">Art√≠culos relacionados:</strong><br><% related_by_hashtags(@article).each do |article| %><br><%= link_to truncate(article.name, length:  80), article, class: "related-article" %><% end %></p>
</template>



<script>
	var content = <%= raw(@article.note) %>;
	var container = document.getElementById("quill-container")
	display_quill_note(content, container);

	<% if related_by_hashtags(@article).count > 0 %>
		var numberOfParagraphs = $("#quill-container p").length; 

		var middle = parseInt(Math.ceil(numberOfParagraphs/2)); 
		var relatedArticles = document.querySelector("#related-articles");
		var clone = document.importNode(relatedArticles.content, true); 

		$("#quill-container p:nth-of-type("+middle+")").after(clone);
		// $("#quill-container > p:nth-of-type("+middle+")");
	<% end %>


</script>
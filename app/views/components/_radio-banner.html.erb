<div class="radio-banner__tune-in no-border">
  <div class="led"></div>Sintoniza ahora
</div>

<div class="radio-banner">
  <!-- 1. Mostramos TODAS las estaciones EXCEPTO WRadio y LOS40QUERETARO -->
  <% get_current_programs.each do |program| %>
    <% unless ["W Radio San Luis", "Los 40 Querétaro"].include?(program.station.name) %>
      <div class="radio-program">
        <div class="radio-program-parent">
          <a href="/<%= program.station.slug %>" target="<%= controller_name == 'stations' && action_name == 'show' ? '_top' : '_blank' %>">
            <img src="<%= program.image %>">
          </a>
        </div>
        <% get_children_programs(program.station.id).each do |child| %>
          <div class="radio-program-children">
            <a href="/<%= child.station.slug %>" target="_top">
              <img src="<%= child.image %>">
            </a>
          </div>
        <% end %>
      </div>
    <% end %>
  <% end %>

  <!-- 2. Mostramos WRadio MANUALMENTE con sus hijos + LOS40QUERETARO -->
  <div class="radio-program">
    <!-- Parent: W Radio San Luis -->
    <div class="radio-program-parent">
      <a href="/wradio" target="_blank">
        <img src="<%= Station.find_by(slug: 'wradio').image %>">
      </a>
    </div>
    
    <!-- Hijo 1: W Radio Querétaro -->
    <div class="radio-program-children">
      <a href="/wradioqueretaro" target="_top">
        <img src="<%= Station.find_by(slug: 'wradioqueretaro').image %>">
      </a>
    </div>
    
    <!-- Hijo 2: W Radio Zacatecas -->
    <div class="radio-program-children">
      <a href="/wradiozacatecas" target="_top">
        <img src="<%= Station.find_by(slug: 'wradiozacatecas').image %>">
      </a>
    </div>
    
    <!-- Hijo 3: W Radio León -->
    <div class="radio-program-children">
      <a href="/wradioleon" target="_top">
        <img src="<%= Station.find_by(slug: 'wradioleon').image %>">
      </a>
    </div>
    
    <!-- Hijo 4: W Radio Puerto Vallarta -->
    <div class="radio-program-children">
      <a href="/wradiopuertovallarta" target="_top">
        <img src="<%= Station.find_by(slug: 'wradiopuertovallarta').image %>">
      </a>
    </div>
    
    <!-- HIJO EXTRA: Los 40 Querétaro -->
    <div class="radio-program-children">
      <a href="/los40queretaro" target="_top">
        <img src="<%= Station.find_by(slug: 'los40queretaro').image %>">
      </a>
    </div>
  </div>
</div>

<style>
  .radio-banner {
    margin-bottom: 0.8rem;
    z-index: 9;
    display: flex;
    flex-wrap: wrap;
    gap: 15px;
  }
  .radio-program {
    position: relative;
  }
  .radio-program-parent img {
    width: 100px;
    height: auto;
  }
  .radio-program-children {
    display: none;
    position: absolute;
    top: 100%;
    left: 0;
    background: white;
    padding: 5px;
    border-radius: 5px;
    box-shadow: 0 2px 5px rgba(0,0,0,0.1);
    z-index: 10;
  }
  .radio-program:hover .radio-program-children {
    display: block;
  }
</style>

<script>
  $(document).ready(function() {
    function ledAnimation() {
      var led = $(".led");
      led.animate({opacity: 0}, 800).animate({opacity: 1}, 800, ledAnimation);
    }
    ledAnimation();
  });
</script>
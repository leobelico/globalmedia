function new_fields(){$(".directUpload").find("input:file").each(function(a,e){var t=$(e),s=$(t.parents("form:first")),d=s.find('input[type="submit"]'),n=$("<div class='bar'></div>"),i=$("<div class='progress'></div>").append(n);t.after(i),t.fileupload({fileInput:t,url:s.data("url"),type:"POST",autoUpload:!0,formData:s.data("form-data"),paramName:"file",dataType:"XML",replaceFileInput:!1,progressall:function(a,e){var t=parseInt(e.loaded/e.total*100,10);n.css("width",t+"%")},start:function(){d.prop("disabled",!0),n.css("background","green").css("color","white").css("padding","12px").css("box-sizing","content-box").css("display","flex").css("width","0%").text("Uploading...")},done:function(a,e){d.prop("disabled",!1),n.text("Success!");var i=$(e.jqXHR.responseXML).find("Key").text(),r="//"+s.data("host")+"/"+i,p=$("<input />",{type:"hidden",name:t.attr("name"),value:r});s.append(p)},fail:function(){d.prop("disabled",!1),n.css("background","red").text("There was an error uploading the file. Refresh and try again.")}})})}$(".directUpload").find("input:file").each(function(a,e){var t=$(e),s=$(t.parents("form:first")),d=s.find('input[type="submit"]'),n=$("<div class='bar'></div>"),i=$("<div class='progress'></div>").append(n);t.after(i),t.fileupload({fileInput:t,url:s.data("url"),type:"POST",autoUpload:!0,formData:s.data("form-data"),paramName:"file",dataType:"XML",replaceFileInput:!1,progressall:function(a,e){var t=parseInt(e.loaded/e.total*100,10);n.css("width",t+"%")},start:function(){d.prop("disabled",!0),n.css("background","green").css("color","white").css("padding","12px").css("box-sizing","content-box").css("display","flex").css("width","0%").text("Uploading...")},done:function(a,e){d.prop("disabled",!1),n.text("Success!");var i=$(e.jqXHR.responseXML).find("Key").text(),r="//"+s.data("host")+"/"+i,p=$("<input />",{type:"hidden",name:t.attr("name"),value:r});s.append(p)},fail:function(){d.prop("disabled",!1),n.css("background","red").text("There was an error uploading the file. Refresh and try again.")}})});